/* ==========================================================================
   Ver Estantes — estética unificada con "Añadir Paquete"
   ========================================================================== */

.ver-estantes {
  /* Tokens (idénticos a Añadir Paquete) */
  --ink:#0f172a; --muted:#64748b; --bd:#e6e9ef;
  --ring:rgba(99,91,255,.28); --ring-strong:rgba(99,91,255,.45);
  --card:#fff; --bg:#f8fafc; --shadow:0 8px 18px rgba(15,23,42,.06);
  --ok:#22c55e; --warn:#f59e0b; --danger:#ef4444;
  --r:12px; --r-sm:10px; --r-xs:6px;

  color: var(--ink);
  background: var(--bg);

  /* ===== Header compacto (no invade el área del H1 global) ===== */
  .titulo-bar{
    margin: 6px 0 var(--r);
    display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px;

    h2{
      margin:0;
      font-size:clamp(1.05rem,2.2vw,1.25rem);
      font-weight:900; letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }

    .icono{
      width:44px;height:44px;padding:8px;border-radius:999px;color:#fff;
      background:conic-gradient(from 220deg,#a5b4fc,#22d3ee,#fca5a5,#a5b4fc);
      box-shadow:inset 0 8px 18px rgba(99,91,255,.18);
    }

    .resumen{
      display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;
      .chip{
        display:inline-flex; align-items:center; gap:6px;
        border:1px solid var(--bd); background:#fff; border-radius:999px;
        padding:6px 10px; font-weight:800; color:#334155; font-size:.86rem;
        &.chip--accent{ color:#4f46e5; border-color:#c7d2fe; background:#eef2ff; }
      }
    }
  }

  /* ===== Leyenda + filtros (alineación por filas) ===== */
  .toolbar{
    display:grid; grid-template-columns:1fr 1fr; gap: var(--r);
    align-items:start; margin-bottom: var(--r);
    @media (max-width:980px){ grid-template-columns:1fr; }

    .leyenda{
      display:flex; gap:14px; flex-wrap:wrap; color:#334155; font-weight:600;
      padding:8px 10px; border:1px solid var(--bd); border-radius:10px; background:#fff; box-shadow:var(--shadow);
      .dot{ display:inline-block; width:9px; height:9px; border-radius:999px; margin-right:6px; vertical-align:middle; }
      .neutra{background:#94a3b8;} .verde{background:var(--ok);} .naranja{background:var(--warn);} .rojo{background:var(--danger);}
    }

    .filtros{
      display:grid; grid-template-columns: minmax(260px,1fr) auto auto auto; gap:10px; justify-content:end;
      @media (max-width:1180px){ grid-template-columns:1fr auto auto; }
      @media (max-width:740px){ grid-template-columns:1fr; }

      .input-icon{
        position:relative;
        input{
          width:100%; height:40px; border:1px solid var(--bd); border-radius:10px;
          background:#fff; padding:0 40px 0 36px; font:inherit;
          &::placeholder{ color:#94a3b8; }
          &:focus-visible{ border-color:transparent; box-shadow:0 0 0 3px var(--ring); }
        }
        svg[aria-hidden]{ position:absolute; left:10px; top:50%; transform:translateY(-50%); color:#94a3b8; }
        .clear{
          position:absolute; right:6px; top:50%; transform:translateY(-50%);
          width:32px;height:32px;border-radius:8px; display:grid; place-items:center;
          border:1px solid var(--bd); background:#fff; color:#94a3b8; cursor:pointer;
          transition:filter .15s, transform .05s;
          &:hover{ filter:brightness(1.03); transform:translateY(-1px); }
        }
      }

      .toggle{
        display:inline-flex; align-items:center; gap:8px; user-select:none;
        input{ display:none; }
        .slider{
          width:54px; height:30px; border-radius:999px; background:#e5e7eb; position:relative; box-shadow:inset 0 2px 6px rgba(15,23,42,.08);
          &::after{ content:""; position:absolute; left:3px; top:3px; width:24px; height:24px; background:#fff; border-radius:999px; box-shadow:var(--shadow); transition:transform .22s; }
        }
        input:checked + .slider{ background:#e9d5ff; }
        input:checked + .slider::after{ transform: translateX(24px); }
        .label{ color:#475569; font-weight:700; }
      }

      .acciones{
        display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;
        .btn-ghost{
          height:38px; padding:0 12px; border-radius:10px; border:1px solid var(--bd); background:#fff; color:#111827; font-weight:900;
          box-shadow:var(--shadow); cursor:pointer; transition:filter .15s, transform .05s;
          &:hover{ filter:brightness(1.02); transform:translateY(-1px); }
        }
      }
    }
  }

  /* ===== Skeleton/estados ===== */
  .skeleton{ display:grid; gap: var(--r-sm); }
  .skeleton .row{
    height:88px; border-radius:12px; border:1px solid var(--bd);
    background:linear-gradient(90deg,#eef2ff,#f8fafc,#eef2ff); background-size:200% 100%;
    animation:sk 1.2s linear infinite;
  }
  @keyframes sk{ 0%{background-position:0 0} 100%{background-position:-200% 0} }

  .estado-error,.estado-vacio{
    padding:10px 12px; border:1px solid var(--bd); border-radius:10px; background:#fafafa; color:#475569; box-shadow:var(--shadow);
  }

  /* ===== Lanes ===== */
  .lanes-matrix{
    display:grid; gap: var(--r-sm);
    grid-template-columns: repeat(3, minmax(260px, 1fr));
    @media (max-width:1200px){ grid-template-columns: repeat(2, minmax(240px, 1fr)); }
    @media (max-width:740px){ grid-template-columns: 1fr; }
  }
  .lane-cell{
    &.empty{ background:#fbfdff; border:1px dashed var(--bd); border-radius:12px; min-height:84px; }

    &.wrap{
      .lane-head{
        position:relative; width:100%; text-align:left;
        border:1px solid var(--bd); border-radius:12px;
        /* >>> Tinte del carril según config */
        background:
          linear-gradient(0deg, var(--lane-rgba, transparent), var(--lane-rgba, transparent)),
          #fff;
        color:#111827;
        padding:12px 42px 12px 12px; box-shadow:var(--shadow); cursor:pointer;
        transition: box-shadow .15s, border-color .15s, transform .05s, background .15s;
        &:hover{ box-shadow:0 12px 24px rgba(15,23,42,.12); transform:translateY(-1px); background:
          linear-gradient(0deg, var(--lane-rgba, transparent), var(--lane-rgba, transparent)), #fdfdff; }
        &:focus-visible{ outline:3px solid var(--ring); outline-offset:2px; }

        /* Cinta lateral con el color REAL del carril  */
        .lane-tape{
          position:absolute; left:0; top:0; bottom:0; width:5px; border-radius:12px 0 0 12px;
          background: var(--lane, #94a3b8);
        }

        /* Barra inferior que indica la ocupación (mantiene semántica) */
        &::after{
          content:""; position:absolute; left:0; right:0; bottom:0; height:3px; border-radius:0 0 12px 12px;
          background:#94a3b8; /* default (neutra) */
        }
        &.verde::after{   background: var(--ok); }
        &.naranja::after{ background: var(--warn); }
        &.rojo::after{    background: var(--danger); }

        .lane-title{ font-weight:900; letter-spacing:.2px; font-size:.95rem; padding-left:6px; }
        .lane-qty{
          position:absolute; right:10px; top:50%; transform:translateY(-50%);
          display:inline-flex; align-items:center; gap:6px;
          border:1px solid var(--bd); background:#fff; border-radius:999px;
          padding:4px 8px; font-weight:700; font-size:.82rem; color:#334155;
          b{ font-size:.9rem; }
          &.zero{ opacity:.75; }
        }
        .chev{ position:absolute; right:12px; top:50%; transform:translateY(-50%); color:#94a3b8; display:none; }
      }
      &.activa .lane-head{ outline:3px solid var(--sel-ring, var(--ring-strong)); outline-offset:2px; }
      &.activa .lane-head .chev{ transform:translateY(-50%) rotate(180deg); }

      /* Ya no coloreamos la cinta por ocupación: lo hace la barra inferior */
      .lane-head.neutra  .lane-tape{ /* keep default */ }
      .lane-head.verde   .lane-tape{ /* keep lane color */ }
      .lane-head.naranja .lane-tape{ /* keep lane color */ }
      .lane-head.rojo    .lane-tape{ /* keep lane color */ }

      .lane-visor{
        overflow:hidden; transition:max-height .35s ease, opacity .25s ease;
        margin-top:8px; border-radius:10px; background:#fff; border:1px solid var(--bd); box-shadow:var(--shadow);

        .lista-paquetes{
          list-style:none; margin:0; padding:10px;
          .paquete{
            display:grid; gap:6px; padding:10px 12px; border:1px solid var(--bd);
            border-radius:10px; background:#fff; margin-bottom:8px;
            &.pendiente{ border-left:3px solid var(--warn); }
            .cliente{ font-weight:800; }
            .meta{
              display:flex; gap:8px; flex-wrap:wrap;
              .pill{ display:inline-flex; align-items:center; gap:6px; border:1px solid var(--bd); background:#fff; border-radius:999px; padding:4px 8px; font-weight:700; font-size:.82rem; color:#334155; }
              .estado.warn{ background:#fff7ed; border-color:#fed7aa; color:#92400e; }
            }
          }
        }
        .sin-paquetes{ padding:14px; color:#475569; }
      }
    }
  }

  /* ===== Racks ===== */
  .grid-estantes{
    display:grid; gap: var(--r-sm);
    grid-template-columns: var(--rack-cols, repeat(3, minmax(340px,1fr)));
    @media (max-width:1200px){ grid-template-columns: repeat(2, minmax(320px,1fr)); }
    @media (max-width:740px){ grid-template-columns: 1fr; }
  }

  .columna{
    background:#fff; border:1px solid var(--bd); border-radius:12px; box-shadow:var(--shadow); overflow:hidden;
    &.estante--placeholder{ background:transparent; border:1px dashed var(--bd); min-height:80px; box-shadow:none; }

    .cabecera-estante{
      padding:12px; border-bottom:1px solid var(--bd); background:#fff;
      .tit{ display:flex; align-items:center; gap:8px; justify-content:space-between; }
      .titulo{ font-weight:900; letter-spacing:.2px; font-size:.96rem; }
      .contador{ display:inline-flex; align-items:center; gap:6px; border:1px solid var(--bd); background:#fff; border-radius:999px; padding:4px 8px; font-weight:800; color:#334155; font-size:.82rem; }
      .mini-progress{ display:flex; align-items:center; gap:10px; margin-top:8px; }
      .mini-progress .bar{ flex:1; height:8px; background:#eef2ff; border-radius:999px; overflow:hidden; }
      .mini-progress .bar span{ display:block; height:100%; background:linear-gradient(90deg,#22c55e,#f59e0b); }
      .mini-progress .pct{ font-size:.8rem; color:#475569; min-width:34px; text-align:right; }
    }

    .baldas{
      padding:10px 12px 12px; display:grid; gap:10px;
      .balda-wrapper{
        border:1px solid var(--bd); border-radius:10px; background:#fff; box-shadow:var(--shadow);
        &.activa .chev{ transform:rotate(180deg); }

        .balda{
          width:100%; text-align:left; background:transparent; border:0; cursor:pointer;
          padding:10px 36px 10px 10px; display:grid; grid-template-columns:1fr auto; align-items:center; gap:10px;
          &:hover{ box-shadow:0 10px 20px rgba(15,23,42,.10); transform:translateY(-1px); }
          &:focus-visible{ outline:3px solid var(--ring-strong); outline-offset:2px; border-radius:10px; }
          .codigo{ font-weight:900; letter-spacing:.15px; font-size:.95rem; }
          .qty{ display:inline-flex; align-items:center; gap:6px; border:1px solid var(--bd); background:#fff; border-radius:999px; padding:4px 8px; font-weight:800; font-size:.82rem; color:#334155; &.zero{ opacity:.75; } }
          .chev{ position:absolute; right:10px; top:50%; transform:translateY(-50%); color:#94a3b8; }
          &.neutra{ box-shadow: inset 4px 0 0 #94a3b8; }
          &.verde{  box-shadow: inset 4px 0 0 var(--ok); }
          &.naranja{box-shadow: inset 4px 0 0 var(--warn); }
          &.rojo{   box-shadow: inset 4px 0 0 var(--danger); }
        }

        .visor-paquetes{
          overflow:hidden; transition:max-height .35s ease, opacity .25s ease; padding:0 10px 10px;
          .lista-paquetes{
            list-style:none; margin:0; padding:0;
            .paquete{
              display:grid; gap:6px; padding:10px 12px; border:1px solid var(--bd); border-radius:10px; background:#fff; margin-top:8px;
              &.pendiente{ border-left:3px solid var(--warn); }
              .cliente{ font-weight:800; }
              .meta{
                display:flex; gap:8px; flex-wrap:wrap;
                .pill{ display:inline-flex; align-items:center; gap:6px; border:1px solid var(--bd); background:#fff; border-radius:999px; padding:4px 8px; font-weight:700; font-size:.82rem; color:#334155; }
                .estado.warn{ background:#fff7ed; border-color:#fed7aa; color:#92400e; }
              }
            }
          }
        }
      }
    }
  }

  /* ===== Accesibilidad ===== */
  :focus-visible{ outline:3px solid var(--ring); outline-offset:2px; }
  mark{ background:#f0f4ff; color:inherit; padding:0 .12em; border-radius:4px; }

  @media (prefers-reduced-motion:reduce){
    *,*::before,*::after{ animation:none!important; transition:none!important; }
  }
}
/* ==========================================================================
   VerEstantes — cabecera y barra de herramientas armonizadas
   (puedes pegar desde aquí al final de tu SCSS actual sin romper estilos)
   ========================================================================== */

.ver-estantes {
  /* Tokens claros (coinciden con tu UI actual) */
  --surface:     var(--ep-surface, #ffffff);
  --surface-2:   var(--ep-surface-2, #f6f8fb);
  --border:      var(--ep-border, #e6ebf2);
  --text:        var(--ep-text, #0f172a);
  --muted:       var(--ep-muted, #64748b);
  --brand:       var(--ep-brand, #2563eb);
  --success:     #22c55e;
  --warn:        #f59e0b;
  --danger:      #ef4444;

  /* ---------- Título + resumen ---------- */
  .titulo-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
    margin: 8px 0 14px;

    h2 {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 20px;
      font-weight: 700;
      color: var(--text);

      .icono {
        opacity: .85;
      }
    }

    .resumen {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;

      .chip {
        background: var(--surface-2);
        border: 1px solid var(--border);
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 600;
        color: var(--text);
        line-height: 1;

        &.chip--accent {
          background: #eef4ff;
          border-color: #d9e6ff;
          color: #1e3a8a;
        }
      }
    }
  }

  /* ---------- Toolbar: leyenda + filtros ---------- */
  .toolbar {
    display: grid;
    grid-template-columns: 1fr minmax(380px, 600px);
    gap: 14px;
    align-items: center;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px 14px;
    margin-bottom: 16px;

    @media (max-width: 980px) {
      grid-template-columns: 1fr;
      row-gap: 10px;
    }
  }

  /* Leyenda compacta en chips */
  .leyenda {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;

    .leg-item {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      color: var(--text);
      line-height: 1;

      .dot {
        width: 10px; height: 10px;
        border-radius: 999px;
        box-shadow: 0 0 0 1.5px #fff inset, 0 0 0 1px var(--border);
      }
      .neutra  { background: #94a3b8; }
      .verde   { background: var(--success); }
      .naranja { background: var(--warn); }
      .rojo    { background: var(--danger); }
    }
  }

  /* Bloque de filtros alineado */
  .filtros {
    display: grid;
    grid-template-columns: 1fr auto auto;
    align-items: center;
    gap: 10px;

    @media (max-width: 980px) {
      grid-template-columns: 1fr;
      gap: 8px;
      .acciones { justify-content: flex-start; }
    }
  }

  /* Input con icono dentro + botón limpiar */
  .input-icon {
    position: relative;

    svg {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      opacity: .65;
    }

    input {
      width: 100%;
      height: 40px;
      padding: 10px 38px 10px 38px; /* espacio para icono + clear */
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 14px;
      color: var(--text);
      outline: none;
      transition: box-shadow .15s ease, border-color .15s ease;

      &:focus {
        border-color: #c9d8ff;
        box-shadow: 0 0 0 4px #e8f0ff;
      }

      &::placeholder { color: #9aa4b2; }
    }

    .clear {
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      height: 28px; width: 28px;
      display: inline-grid;
      place-items: center;
      border: 0;
      background: transparent;
      border-radius: 8px;
      color: #6b7280;
      cursor: pointer;

      &:hover { background: #f1f5f9; }
      svg { pointer-events: none; }
    }
  }

  /* Toggle bonito y compacto */
  .toggle {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    user-select: none;
    white-space: nowrap;

    input { display: none; }

    .slider {
      width: 44px; height: 24px;
      background: #e5e7eb;
      border: 1px solid var(--border);
      border-radius: 999px;
      position: relative;
      transition: background .15s ease, border-color .15s ease;

      &::after {
        content: "";
        position: absolute;
        top: 2px; left: 2px;
        width: 20px; height: 20px;
        border-radius: 50%;
        background: #fff;
        border: 1px solid var(--border);
        transition: transform .18s ease;
      }
    }

    input:checked + .slider {
      background: #dbeafe;
      border-color: #c7d2fe;

      &::after { transform: translateX(20px); border-color: #bcc7ff; }
    }

    .label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
      opacity: .9;
    }
  }

  /* Botones fantasma para acciones */
  .acciones {
    display: flex;
    gap: 8px;
    justify-content: flex-end;

    .btn-ghost {
      height: 36px;
      padding: 0 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: background .15s ease, box-shadow .15s ease, border-color .15s ease;

      &:hover {
        background: #f8fafc;
        border-color: #dbe2ea;
        box-shadow: 0 1px 0 rgba(15,23,42,.03);
      }
      &:active {
        background: #f1f5f9;
      }
    }
  }

  /* --------- Accesorios menores ---------- */
  .skeleton .row {
    height: 46px;
    border-radius: 12px;
    background: linear-gradient(90deg, #eef2f7, #f6f8fb 40%, #eef2f7 80%);
    background-size: 200% 100%;
    animation: skel 1.2s infinite linear;
    &:not(:last-child) { margin-bottom: 10px; }
  }
  @keyframes skel { to { background-position: -200% 0; } }

  .estado-error {
    background: #fff1f2;
    color: #9f1239;
    border: 1px solid #fecdd3;
    padding: 12px 14px;
    border-radius: 12px;
  }
}
