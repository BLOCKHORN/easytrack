/* src/styles/BuscarPaquete.scss — versión pro con móvil armónico */
.buscar-paquete {
  /* ===== Tokens ===== */
  --bg: #f6f7f9;
  --panel: #ffffff;
  --line: #e5e7eb;
  --line-strong: #d4d7de;

  --text: #0f172a;
  --muted: #475569;
  --muted-2: #64748b;

  --primary: #2563eb;
  --success: #16a34a;
  --danger: #dc2626;
  --ok: var(--success);

  /* Bloques visibles */
  --company-bg: #eaf2ff;
  --company-border: #bcd6ff;
  --company-text: #0b3155;

  --location-bg: #eafff0;
  --location-border: #cfc6ff;
  --location-text: #1f2660;

  --date-bg: #e9f7f2;
  --date-border: #b7e5d7;
  --date-text: #0b3f37;

  /* Cliente chip (neutral sobrio) */
  --client-bg: #f3f6fb;
  --client-border: #dfe6f5;
  --client-text: #0f172a;

  --chip-bg: #f3f4f6;
  --chip-border: #e5e7eb;

  --shadow-sm: 0 1px 2px rgba(2,6,23,.06);
  --shadow-md: 0 6px 18px rgba(2,6,23,.06);

  --row-odd: #dcedfe;   /* color 1 */
  --row-even: #f7f9fc;  /* color 2 sutil */

  background: var(--bg);
  color: var(--text);

  /* ===== Head ===== */
  .bp-head {
    display: grid; gap: 12px; margin-bottom: 12px;

    h2 {
      margin: 0; font-size: 18px; font-weight: 800; letter-spacing: .2px;
      display: inline-flex; align-items: center; gap: 8px;
      .icono-titulo { color: var(--primary); font-size: 16px; }
    }

    .search-hero{
      position: relative;
      background: var(--panel); border: 1px solid var(--line); border-radius: 12px;
      box-shadow: var(--shadow-sm); padding: 10px 44px 10px 40px;

      input[type="search"]{
        width: 100%; border: 0; background: transparent; outline: none;
        font-size: 15px; font-weight: 600; color: var(--text);
        &::placeholder { color: #9aa3af; font-weight: 500; }
      }
      .magnifier{ position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--primary); }
      .clear{
        position: absolute; right: 6px; top: 50%; transform: translateY(-50%);
        width: 32px; height: 32px; display: grid; place-items: center; border-radius: 8px;
        background: transparent; border: 0; color: var(--muted-2); cursor: pointer;
        &:hover{ background: #eef2f6; color: var(--text); }
      }
    }

    .kpis{
      display: grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap: 10px;
      .kpi,.progress{
        background: var(--panel); border: 1px solid var(--line); border-radius: 12px; padding: 10px; box-shadow: var(--shadow-sm);
      }
      .kpi{ display: grid; gap: 4px;
        .kpi-label{ font-size: 11px; color: var(--muted); }
        .kpi-value{ font-size: 18px; font-weight: 800; }
      }
      .progress{
        display: grid; gap: 6px; align-items: center;
        .bar{ height: 8px; border-radius: 999px; background: #e6ecff; position: relative; overflow: hidden; }
        .bar > div{ height: 100%; background: var(--primary); }
        .progress-text{ font-size: 11px; color: var(--muted); text-align: right; font-weight: 600; }
      }
    }
  }

  /* ===== Filtros ===== */
  .bp-filtros{
    display: grid; grid-template-columns: repeat(4,minmax(0,1fr)) auto; gap: 10px; align-items: end; margin-bottom: 10px;

    .f-item{
      background: var(--panel); border: 1px solid var(--line); border-radius: 12px; padding: 10px 12px; box-shadow: var(--shadow-sm); display: grid; gap: 6px;
      .f-label{ font-size: 11px; color: var(--muted); }
      select{
        width:100%; background:#f8fafc; border:1px solid var(--line); border-radius: 10px; padding:10px 12px; font-size:14px; font-weight:600;
        &:focus{ outline:none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37,99,235,.2); }
      }
    }
    .f-actions{
      justify-self: end; display:flex; gap:8px; flex-wrap:wrap;
      .btn-ghost{
        background: var(--panel); border: 1px solid var(--line); border-radius: 10px; padding: 10px 12px; font-weight: 700; cursor: pointer; box-shadow: var(--shadow-sm);
        &:hover{ background:#f3f4f6; }
        &.active{ border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37,99,235,.2); }
        svg{ margin-right: 6px; }
      }
    }
  }

  /* ===== Chips ===== */
  .chips{
    margin-bottom: 10px;
    .chips-list{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      background: var(--chip-bg); border:1px solid var(--chip-border); color: var(--text); padding:8px 10px; border-radius:999px; font-size:12px; font-weight:700; cursor:pointer;
      svg{ margin-left: 6px; }
    }
  }

  /* ===== Selección ===== */
  .selection-bar{
    position: sticky; top: 8px; z-index: 20; margin: 10px 0; padding: 10px 12px;
    background: #f1f5f9; border: 1px solid var(--line); border-radius: 10px; box-shadow: var(--shadow-sm);
    display: flex; align-items: center; justify-content: space-between; gap: 10px;

    .selection-info{ display:flex; align-items:center; gap:8px; font-weight:800; color:#0b3155; }
    .selection-actions{ display:flex; flex-wrap:wrap; gap:8px;
      .btn-ghost{ background: var(--panel); border:1px solid var(--line); padding:8px 10px; border-radius:10px; font-weight:700; cursor:pointer; &:hover{ background:#f3f4f6; } }
      .btn{ padding:8px 10px; border-radius:10px; font-weight:800; cursor:pointer; }
      .btn--danger{ background: var(--danger); color:#fff; border:0; }
    }
  }

  /* ===== Tabla / Cards wrapper ===== */
  .tabla-wrapper{
    background: var(--panel); border:1px solid var(--line); border-radius:14px; padding: 8px; box-shadow: var(--shadow-md);

    /* ===== Tabla (desktop) ===== */
    table.tabla-paquetes{
      tbody tr:nth-child(odd):not(.row-selected){ background: var(--row-odd); }
  tbody tr:nth-child(even):not(.row-selected){ background: var(--row-even); }
      width:100%; border-collapse: separate; border-spacing: 0 8px;

      thead th{
        font-size:12px; color: var(--muted); text-align:left; padding: 10px 12px; font-weight:800; user-select:none; position:relative;
        &.asc::after,&.desc::after{ content:""; position:absolute; right:8px; top:50%; border-left:5px solid transparent; border-right:5px solid transparent; }
        &.asc::after{ border-bottom:6px solid var(--primary); transform: translateY(-90%); }
        &.desc::after{ border-top:6px solid var(--primary); transform: translateY(-10%); }
        &.sel-col{ width:44px; padding-right:6px; cursor: default; }
      }

      tbody tr{
        background: #fbfcfd; border:1px solid var(--line); border-radius:12px;
        box-shadow: var(--shadow-sm); transition: transform .06s ease, box-shadow .15s ease, border-color .15s ease;
        &:hover{ transform: translateY(-1px); box-shadow: 0 10px 24px rgba(2,6,23,.08); border-color: var(--line-strong); }
        &.row-selected{ background:#f0f9ff; border-color:#bfe1ff; box-shadow: 0 0 0 3px rgba(14,165,233,.25), var(--shadow-sm); }
        &.flash{ animation: flashRow .8s ease; }
      }
      @keyframes flashRow{ 0%{ box-shadow: 0 0 0 0 rgba(37,99,235,.25);} 100%{ box-shadow: var(--shadow-sm);} }

      tbody td{ padding: 12px; vertical-align: middle; }
      td.sel-col{ width:44px; padding-right: 6px; }

      .sel-toggle{
        width:32px; height:32px; display:grid; place-items:center; border-radius:8px; border:1px solid var(--line); background:#f8fafc; color:#0f172a; cursor:pointer;
        transition: transform .06s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease, color .15s ease;
        svg{ width:18px; height:18px; }
        &:hover{ transform: translateY(-1px); background:#f3f4f6; }
        &.on{ background:#eaf6ff; border-color:#7cc2ff; color:#0b3155; box-shadow: 0 0 0 3px rgba(14,165,233,.22); }
      }

      .cliente-col .cliente{
        font-weight:800; font-size:15px; letter-spacing:.2px;
        &.blurred{ filter: blur(6px); }
        mark{ background:#fde68a; color:#713f12; padding:0 2px; border-radius:4px; font-weight:900; }
      }

      .compania .comp-text{
        display:inline-flex; align-items:center; justify-content:center; text-align:center;
        min-width: 120px; height: 32px; padding: 0 12px; line-height: 1;
        border-radius: 10px; background: var(--company-bg); border: 1px solid var(--company-border); color: var(--company-text);
        font-weight: 800;
      }

      td[data-label="Ubicación"] .ubi{
        display:inline-flex; align-items:center; justify-content:center; text-align:center;
        min-width: 120px; height: 32px; padding: 0 12px; line-height: 1;
        border-radius: 10px; background: var(--location-bg); border: 1px solid var(--location-border); color: var(--location-text);
        font-weight: 800;
      }

      /* ===== Fecha como pill compacta ===== */
      td[data-label="Fecha"]{
        text-align: left; background: transparent; border: 0; padding: 12px;
        .date-pill{
          display:inline-flex; align-items:center; justify-content:center;
          min-width: 120px; height: 32px; padding: 0 12px; line-height: 1;
          border-radius: 10px; background: var(--date-bg); border: 1px solid var(--date-border); color: var(--date-text);
          font-weight: 800;
        }
      }

      .badge-estado{
        padding:6px 10px; border-radius: 999px; font-size:12px; font-weight:800;
        &.entregado{ background:#e6f6ec; color:#0f5132; border:1px solid #a7e3be; }
        &.pendiente{ background:#fff4e5; color:#92400e; border:1px solid #f3cf9b; }
      }

      /* ===== Acciones: 3 iconos arriba (igual ancho) + Entregar abajo full ===== */
      .acciones{
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: 38px;
        gap: 8px;
        align-items: stretch;
        /* ancho cómodo para que el botón no colapse */
        min-width: 340px;

        /* Colocar SIEMPRE el botón Entregar en la segunda fila abarcando todo,
           aunque en el DOM esté en medio de los iconos */
        .btn-entregar{
          grid-column: 1 / -1;
          grid-row: 2;
          width: 100%;
          height: 38px;
          padding: 0 14px;
          border-radius: 10px;
          border: 1px solid transparent;
          background: var(--success);
          color: #fff;
          font-weight: 800;
          cursor: pointer;
          transition: transform .06s ease, box-shadow .15s ease, filter .15s ease;
          &:hover{ transform: translateY(-1px); box-shadow: 0 6px 18px rgba(22,163,74,.22); filter: saturate(1.03); }
        }

        /* Forzar que todos los iconos queden en la FILA 1 y cada uno en una columna (1fr) */
        .icono{
          grid-row: 1;                 /* todos arriba */
          width: 100%;
          height: 100%;
          display: grid;
          place-items: center;         /* centra el svg perfecto */
          box-sizing: border-box;
          border-radius: 10px;
          border: 1px solid var(--line);
          background: #fff;
          color: #0f172a;
          cursor: pointer;
          transition: transform .06s ease, background .15s ease, color .15s ease, border-color .15s ease, box-shadow .15s ease;
          svg{ width: 18px; height: 18px; }
          &:hover{ transform: translateY(-1px); background:#f3f4f6; }
          &.editar{ color:#3730a3; border-color:#cfd2e6; }
          &.eliminar{ color: var(--danger); border-color:#f0c9cd; }
          &.privacidad{ color:#0f172a; }
        }
      }
    }

    /* ===== Cards (móvil) ===== */
    .cards-m{ display: none; }
      .card:nth-child(odd):not(.row-selected){ background: var(--row-odd); }
  .card:nth-child(even):not(.row-selected){ background: var(--row-even); }
  }

  /* ===== Paginación ===== */
  .paginacion{
    margin-top: 10px; display:flex; align-items:center; justify-content:center; gap:8px;
    button{
      background:#fff; border:1px solid var(--line); border-radius:8px; padding:8px 10px; font-weight:800; cursor:pointer; box-shadow: var(--shadow-sm);
      &:hover{ background:#f3f4f6; }
      &:disabled{ opacity:.55; cursor:not-allowed; }
    }
  }

  /* ===== Modal ===== */
  .modal-edicion{
    position: fixed; inset: 0; z-index: 40; background: rgba(2,6,23,.45); display:grid; place-items:center;
    .modal-contenido{
      width:min(560px,92vw); background:var(--panel); border:1px solid var(--line); border-radius:12px; box-shadow: var(--shadow-md); padding: 14px;
      h3{ margin:0 0 10px; font-weight:800; }
      label{ display:grid; gap:6px; margin-bottom:10px;
        span{ font-size: 11px; color: var(--muted); }
        input,select{ background:#f8fafc; border:1px solid var(--line); border-radius:10px; padding:10px 12px; font-weight:700; &:focus{ outline:none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37,99,235,.2);} }
      }
      .modal-acciones{ display:flex; justify-content:flex-end; gap:8px; margin-top: 8px;
        .guardar{ background: var(--primary); color:#fff; border:0; padding:10px 12px; border-radius:10px; font-weight:800; }
        .cancelar{ background:#f3f4f6; border:1px solid var(--line); padding:10px 12px; border-radius:10px; font-weight:800; }
      }
    }
  }

  /* ===== Confirm ===== */
  .bp-confirm{
    position: fixed; inset:0; z-index:45; background: rgba(2,6,23,.45); display:grid; place-items:center;
    &__panel{
      width:min(520px,92vw); background:#fff; border:1px solid var(--line); border-radius:12px; box-shadow: var(--shadow-md); padding:14px;
      h4{ margin:0 0 6px; font-weight:800; } p{ color: var(--muted-2); }
      .bp-confirm__actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:10px;
        .btn{ padding:10px 12px; border-radius:10px; font-weight:800; cursor:pointer; }
        .btn--muted{ background:#f3f4f6; border:1px solid var(--line); }
        .btn--danger{ background: var(--danger); color:#fff; border:0; }
      }
    }
  }

  /* ===== Toasts ===== */
  .toasts{
    position: fixed; right: 16px; bottom: 16px; z-index: 50; display:grid; gap:8px;
    .toast{
      min-width: 240px; background: #fff; border:1px solid var(--line); border-left: 6px solid var(--primary);
      padding:10px 12px; border-radius:10px; box-shadow: var(--shadow-md); font-weight:800;
      &.success{ border-left-color: var(--success); }
      &.error{ border-left-color: var(--danger); }
      &.info{ border-left-color: var(--primary); }
    }
  }

  /* ===== Responsive ===== */
  @media (max-width: 1280px){ .bp-filtros{ grid-template-columns: repeat(3,minmax(0,1fr)) auto; } }
  @media (max-width: 1024px){ .bp-head .kpis{ grid-template-columns: 1fr 1fr; } }

  /* ===== MÓVIL ===== */
  @media (max-width: 960px){
    .bp-filtros{ grid-template-columns: 1fr 1fr; .f-actions{ grid-column: 1 / -1; justify-self: start; } }

    .tabla-wrapper{
      table.tabla-paquetes{ display:none; }
      .cards-m{ display:grid; gap:10px; }

      .card{
        background:#fbfcfd; border:1px solid var(--line); border-radius:12px; box-shadow: var(--shadow-sm); padding: 12px;
        transition: transform .06s ease, box-shadow .15s ease, border-color .15s ease;
        &:hover{ transform: translateY(-1px); box-shadow: 0 10px 24px rgba(2,6,23,.08); }

        .card__head{
          display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px;

          .sel-toggle{
            width:34px; height:34px; display:grid; place-items:center; border-radius:8px; border:1px solid var(--line);
            background:#f8fafc; color:#0f172a; cursor:pointer;
            &.on{ background:#eaf6ff; border-color:#7cc2ff; color:#0b3155; box-shadow: 0 0 0 3px rgba(14,165,233,.22); }
          }

          .card__head-actions{
            display:flex; align-items:center; gap:8px; flex-wrap:wrap;

            .btn-icon{
              width:34px; height:34px; display:grid; place-items:center;
              border:1px solid var(--line); border-radius:8px; background:#fff; color:#0f172a;
            }

            .btn-ghost.sm{
              display:inline-flex; align-items:center; gap:6px; height:34px; padding:0 10px;
              border-radius:8px; background:#fff; border:1px solid var(--line); font-weight:800; color:#0f172a;
              &.danger{ color: var(--danger); border-color:#f0c9cd; }
              svg{ width:16px; height:16px; }
            }
          }
        }

        .card__row{
          display:grid; grid-template-columns: 100px 1fr; align-items:center; gap: 10px; padding: 6px 0;

          .label{ color: var(--muted); font-weight:700; }

          .client-chip{
            display:inline-flex; align-items:center; justify-content:center; min-height:36px; padding:0 12px;
            border-radius:10px; background: var(--client-bg); border:1px solid var(--client-border); color: var(--client-text); font-weight:800; text-align:center;
            &.blurred{ filter: blur(6px); }
            mark{ background:#fde68a; color:#713f12; padding:0 2px; border-radius:4px; font-weight:900; }
          }

          .comp-text{
            display:inline-flex; align-items:center; justify-content:center; height:36px; padding:0 12px;
            border-radius:10px; background: var(--company-bg); border:1px solid var(--company-border); color: var(--company-text); font-weight:800;
          }

          .ubi{
            display:inline-flex; align-items:center; justify-content:center; height:36px; padding:0 12px;
            border-radius:10px; background: var(--location-bg); border:1px solid var(--location-border); color: var(--location-text); font-weight:800;
          }

          .inline-date-state{
            display:flex; align-items:center; gap:8px; flex-wrap:wrap;
            .date-strong{
              display:inline-flex; align-items:center; justify-content:center; height:36px; padding:0 12px;
              border-radius:10px; background: var(--date-bg); border:1px solid var(--date-border); color: var(--date-text); font-weight:800;
            }
            .badge-estado{
              padding:6px 10px; border-radius:999px; font-size:12px; font-weight:800;
              &.entregado{ background:#e6f6ec; color:#0f5132; border:1px solid #a7e3be; }
              &.pendiente{ background:#fff4e5; color:#92400e; border:1px solid #f3cf9b; }
            }
          }
        }

        .card__footer{
          margin-top: 8px;
          .btn.full{
            width:100%; display:flex; align-items:center; justify-content:center;
            height:40px; border-radius:10px; font-weight:800;
            border:1px solid var(--success); background: var(--success); color:#fff;
          }
        }
      }
    }
  }
}
