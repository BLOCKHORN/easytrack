/* src/styles/AnadirPaquete.scss */
/* ===== Tokens ===== */
:root{
  --brand:#2563eb; --brand-rgba:rgba(37,99,235,.12); --brand-ring:rgba(37,99,235,.35);
  --bg:#f7f9fc; --card:#fff; --card-2:#f3f6fb; --text:#0b1426; --muted:#5b6b88; --line:#dfe6f1;
  --ok:#16a34a; --warn:#d97706; --danger:#dc2626;
  --ring:0 0 0 3px var(--brand-ring);
  --shadow-1:0 6px 18px rgba(13,34,79,.10);
  --shadow-2:0 12px 32px rgba(13,34,79,.14);
}

.anadir-paquete{
  color:var(--text); background:var(--bg); min-height:100%; padding-bottom:48px;

  /* ===== Header ===== */
  .cabecera{
    padding:24px 20px 12px; border-bottom:1px solid var(--line);
    background:
      radial-gradient(1200px 260px at -4% -20%, rgba(37,99,235,.12) 0%, transparent 45%),
      linear-gradient(180deg,#fff 0%,#f8fbff 80%);
    .titulo{ display:flex; align-items:center; gap:12px;
      svg{font-size:24px; color:var(--brand);}
      h1{margin:0; font-size:22px; font-weight:800;}
      p{margin:0; color:var(--muted);}
    }
  }

  .form{ padding:20px; display:grid; gap:16px; }

  /* ===== Panel base ===== */
  .panel{
    background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px 16px 18px; box-shadow:var(--shadow-1);
    h2{ margin:0 0 6px; font-size:16px; font-weight:800; }
    .hint{ margin:0 0 10px; color:var(--muted); font-size:13px; }
  }

  /* =========================================================
     DATOS DEL PAQUETE — armonía, encuadre y orden
     ========================================================= */
  .panel.datos{
    background:
      linear-gradient(180deg,#ffffff 0%, #ffffff 65%, #ffffff 65%) padding-box,
      radial-gradient(1200px 300px at 50% -80px, rgba(37,99,235,.08), transparent 60%) border-box;
    border-radius:16px;

    /* ✅ DOS COLUMNAS IGUALES: cliente y empresa alineados a partes iguales */
    .fila{
      display:grid; gap:14px; grid-template-columns: 1fr 1fr;
      @media (max-width: 980px){ grid-template-columns: 1fr; }
    }

    .campo{
      position:relative; display:flex; flex-direction:column; gap:8px;
      padding:10px 12px; border-radius:12px; background:var(--card-2); border:1px solid var(--line);
      label{ font-size:12px; color:var(--muted); font-weight:700; letter-spacing:.02em; }
      input[type="text"], select{
        width:100%;
        background:#fff; border:1px solid var(--line); color:var(--text);
        padding:12px 12px; border-radius:10px; outline:none; height:44px;
        transition:border-color .18s ease, box-shadow .18s ease, background .18s ease;
      }
      input::placeholder{ color:#94a3b8; }
      input:focus, select:focus{ border-color:var(--brand); box-shadow:var(--ring); }
    }

    /* Si en el JSX todavía existe un tercer .campo “hueco”, lo ocultamos para que no rompa el layout */
    .fila .campo:nth-child(3){ display:none; }

    /* ===== BLOQUE CENTRAL (chips + botón) ===== */
    .bloque-central{
      margin-top:12px;
      display:grid; gap:14px; place-items:center;

      .chips{
        display:flex; gap:14px; flex-wrap:wrap; justify-content:center; align-items:center;
        background:#fff; border:1px solid var(--line); border-radius:14px; padding:12px 14px;
        box-shadow:0 6px 18px rgba(13,34,79,.06);
      }

      .chip{
        display:inline-flex; align-items:center; gap:12px;
        padding:12px 14px; border-radius:12px; border:1px solid var(--line); font-weight:700;
        svg{ font-size:18px; }
        .lbl{ letter-spacing:.02em; color:var(--text); opacity:.9; }
        .pill{
          font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
          font-size:22px; font-weight:800; background:#eef4ff; border:1px solid #d9e6ff;
          padding:8px 14px; border-radius:12px; color:var(--text);
        }
        .pill--brand{ background:var(--brand-rgba); border-color:transparent; }
      }
      .chip--hint{ background:linear-gradient(180deg,#fff6e9,#fff0db); border-color:#ffe0b3; svg{color:var(--warn);} }
      .chip--selected{ background:linear-gradient(180deg,#eaf1ff,#e3eeff); border-color:#cfe0ff; svg{color:var(--brand);} }

      .acciones-centro{ display:grid; place-items:center; }
      .btn-primary{
        background:var(--brand); border:none; color:#fff; font-weight:800; border-radius:14px; cursor:pointer;
        transition:transform .06s ease, filter .18s ease, box-shadow .18s ease; box-shadow:0 10px 28px rgba(37,99,235,.22);
      }
      .btn-xl{ padding:16px 24px; font-size:18px; min-width:300px; }
      .btn-primary:hover{ filter:brightness(1.05); transform:translateY(-1px); }
      .btn-primary:disabled{ opacity:.6; cursor:not-allowed; transform:none; box-shadow:none; }
    }
  }

  /* =========================================================
     REJILLA DE ALMACÉN
     ========================================================= */
  .panel.rejilla{
    .estantes-grid, .lanes-grid{ display:grid; gap:16px; }

    .estante{
      background:#fff; border:1px solid var(--line); border-radius:14px; overflow:hidden;
      &-header{
        padding:12px 14px; border-bottom:1px solid var(--line);
        font-weight:800; display:flex; align-items:baseline; gap:10px;
        .muted{ color:var(--muted); font-weight:600; }
      }
      .baldas-grid{ display:flex; flex-direction:column; gap:10px; padding:12px; }
    }

    .balda, .lane{
      position:relative; background:#f7fbff; border:1px solid var(--line); color:var(--text);
      padding:10px 12px; border-radius:12px; text-align:left; cursor:pointer;
      transition:transform .06s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      box-shadow:0 0 0 0 transparent;
      &:hover{ transform:translateY(-1px); border-color:#cfe0ff; background:#fff; }
      &:focus-visible{ outline:none; box-shadow:var(--ring); }
      .balda-header, .lane-name{ font-weight:800; letter-spacing:.02em; }
      .balda-badge, .lane-badge{
        display:inline-flex; align-items:center; gap:6px;
        padding:4px 8px; border-radius:8px; background:#eef4ff; color:#4b5a78; font-size:12px; border:1px solid #dfe8ff;
      }
    }

    .balda.verde, .lane.verde{ background:#f4fff7; border-left:4px solid var(--ok); }
    .balda.naranja, .lane.naranja{ background:#fff9f1; border-left:4px solid var(--warn); }
    .balda.rojo, .lane.rojo{ background:#fff5f5; border-left:4px solid var(--danger); }

    .activa{
      border-color:var(--brand); background:#fff;
      box-shadow:0 0 0 2px #e8f0ff, 0 0 0 6px var(--brand-ring); position:relative;
    }
    .pulse{ animation:pulseGlow 1.2s ease-in-out 0s infinite, subtleLift .9s ease-in-out 0s infinite; }

    .estante--placeholder, .lane-cell.empty{
      background:repeating-linear-gradient(135deg,#f3f6fb 0 10px,#ffffff 10px 20px);
      border:1px dashed var(--line); border-radius:14px; min-height:64px;
    }

    .lanes-grid .lane{
      display:flex; gap:8px; align-items:center; min-height:56px; background:#f7fbff;
      .lane-header{ width:100%; display:flex; align-items:center; gap:10px; }
      .lane-dot{ width:10px; height:10px; border-radius:999px; background:var(--lane, var(--brand)); opacity:.95; }
      .flex-spacer{ flex:1; }
    }

    .leyenda{
      margin-top:8px; color:var(--muted); font-size:12px;
      display:flex; gap:16px; align-items:center; flex-wrap:wrap;
      .dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px; }
      .dot.verde{ background:var(--ok); } .dot.naranja{ background:var(--warn); } .dot.rojo{ background:var(--danger); }
    }

    .grid-skeleton{
      display:grid; gap:12px; grid-template-columns:repeat(3, minmax(0,1fr));
      @media (max-width:980px){ grid-template-columns:repeat(2, minmax(0,1fr)); }
      @media (max-width:600px){ grid-template-columns:repeat(1, minmax(0,1fr)); }
      .skeleton-card{
        height:84px; border-radius:12px; background:linear-gradient(90deg,#eef3fb 0%,#e6eefb 40%,#eef3fb 80%); animation:shimmer 1.2s linear infinite;
      }
    }
  }

  /* ===== Modal éxito ===== */
  .modal-exito{
    position:fixed; inset:0; display:grid; place-items:center; z-index:50;
    background:radial-gradient(360px 200px at 50% 20%, rgba(22,163,74,.08), transparent 70%); pointer-events:none;
    .contenido{
      pointer-events:auto; display:flex; align-items:center; gap:12px; background:#fff;
      border:1px solid rgba(22,163,74,.35); color:#064e3b; border-radius:16px; padding:16px 18px;
      box-shadow:0 12px 40px rgba(13,34,79,.18), 0 0 0 6px rgba(34,197,94,.10);
      transform:translateY(-6px) scale(.98); animation:popIn .16s ease forwards;
      svg{ color:#16a34a; font-size:22px; }
      h3{ margin:0; font-size:16px; font-weight:800; } p{ margin:0; color:#0f5132; }
    }
  }
  .modal-exito--giant .contenido{ padding:18px 20px; h3{ font-size:18px; } }

  /* ===== Capa y animación del vuelo del paquetito ===== */
  #fly-layer{ position:fixed; inset:0; pointer-events:none; z-index:60; }
  .fly-parcel{
    position:fixed; width:34px; height:34px;
    left:var(--sx,0px); top:var(--sy,0px); transform:translate(-50%,-50%);
    background:var(--brand); border-radius:10px; display:grid; place-items:center;
    box-shadow:0 8px 24px rgba(37,99,235,.28), 0 0 0 5px rgba(37,99,235,.16); opacity:.98;
    .icon{display:grid; place-items:center;} svg{ fill:#fff; }
  }
  .fly-parcel.animate{ animation:fly 1.15s cubic-bezier(.22,.8,.25,1) forwards; }

  /* ===== Alertas (si se usan) ===== */
  .alerta{
    margin-top:10px; display:flex; gap:10px; align-items:flex-start;
    border:1px solid var(--line); padding:10px 12px; border-radius:12px;
    &.info{ background:#eef4ff; border-color:#dbe7ff; }
    &.warning{ background:#fff4e6; border-color:#ffe0b3; }
    svg{ margin-top:3px; }
    b{ display:block; } p{ margin:2px 0 0; color:var(--muted); }
  }
}

/* ===== Animaciones ===== */
@keyframes shimmer{ 0%{background-position:-120% 0;} 100%{background-position:120% 0;} }
@keyframes popIn{ from{ transform:translateY(-6px) scale(.98); opacity:0; } to{ transform:translateY(0) scale(1); opacity:1; } }

/* Pulso infinito en la selección */
@keyframes pulseGlow{
  0%{ box-shadow:0 0 0 2px #e8f0ff, 0 0 0 6px var(--brand-ring); }
  50%{ box-shadow:0 0 0 3px #dce7ff, 0 0 0 9px rgba(37,99,235,.28); }
  100%{ box-shadow:0 0 0 2px #e8f0ff, 0 0 0 6px var(--brand-ring); }
}
@keyframes subtleLift{ 0%{ transform:translateY(0); } 50%{ transform:translateY(-1px); } 100%{ transform:translateY(0); } }

/* Vuelo con arco visible */
@keyframes fly{
  0%{ transform:translate(calc(var(--sx)*1px), calc(var(--sy)*1px)) scale(1); opacity:.98; filter:brightness(1); }
  15%{ transform:translate(calc(var(--sx)*1px), calc(var(--sy)*1px - 30px)) scale(1.06) rotate(-6deg); }
  45%{
    transform:translate(
      calc( (var(--sx) + (var(--ex) - var(--sx)) * .45) * 1px ),
      calc( (var(--sy) + (var(--ey) - var(--sy)) * .45 - 90) * 1px )
    ) scale(1.02) rotate(4deg);
  }
  80%{
    transform:translate(
      calc( (var(--sx) + (var(--ex) - var(--sx)) * .86) * 1px ),
      calc( (var(--sy) + (var(--ey) - var(--sy)) * .86 - 16) * 1px )
    ) scale(.96) rotate(2deg);
    filter:brightness(1.02);
  }
  100%{ transform:translate(calc(var(--ex)*1px), calc(var(--ey)*1px)) scale(.9); opacity:0; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important; }
}

/* Helpers */
.muted{ color:var(--muted) !important; }
.flex{ display:flex; }
.center{ display:grid; place-items:center; }
