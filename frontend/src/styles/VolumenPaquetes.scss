/* ======================================================
   Volumen de Paquetes â€” Encajado con Dashboard (Stripe-like)
   Scope: .volumen-paquetes
   ====================================================== */

.volumen-paquetes {
  /* Hereda los tokens del dashboard si existen */
  --vp-surface: var(--surface, #ffffff);
  --vp-surface-2: var(--surface-2, #f7f9fc);
  --vp-text: var(--text, #0f172a);
  --vp-muted: var(--muted, #64748b);
  --vp-border: var(--border, #e6ebf4);

  /* Brand del dashboard */
  --vp-brand-indigo: var(--brand-indigo, #635bff);
  --vp-brand-cyan: var(--brand-cyan, #00d4ff);
  --vp-brand-ring: var(--brand-ring, rgba(99, 91, 255, .28));

  --vp-shadow: 0 10px 28px rgba(15,23,42,.06);

  color: var(--vp-text);

  /* ---------- Header + Controles ---------- */
  .vp-header {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
    margin-bottom: 12px;

    @media (max-width: 820px) {
      grid-template-columns: 1fr;
      align-items: start;
    }
  }

  .vp-title {
    display: flex; align-items: center; gap: 12px;

    .vp-icon {
      display: grid; place-items: center;
      width: 36px; height: 36px; border-radius: 10px;
      background: linear-gradient(180deg, #f3f6ff, #eef4ff);
      border: 1px solid var(--vp-border);
      color: var(--vp-brand-indigo);
    }

    h3 { margin: 0; font-size: clamp(18px, 1.6vw, 20px); letter-spacing: -.2px; }
    .vp-sub { margin: 2px 0 0; color: var(--vp-muted); font-size: 13px; }
  }

  .vp-controls {
    display: flex; gap: 10px; align-items: center; justify-content: flex-end; flex-wrap: wrap;

    @media (max-width: 820px) { justify-content: flex-start; }

    /* Segmented control pro */
    .vp-segmented {
      display: inline-flex;
      gap: 6px;
      padding: 4px;
      border-radius: 999px;
      background: var(--vp-surface-2);
      border: 1px solid var(--vp-border);
    }

    .vp-segment {
      appearance: none; border: none; cursor: pointer;
      padding: 8px 12px; border-radius: 999px;
      background: transparent; color: var(--vp-muted);
      font-weight: 700; font-size: 13px; letter-spacing: .2px;
      transition: background .18s ease, color .18s ease, box-shadow .18s ease, transform .12s ease;

      &:hover { background: #fff; color: var(--vp-text); box-shadow: 0 4px 12px rgba(15,23,42,.06); transform: translateY(-0.5px); }
      &:active { transform: translateY(0); }

      &.vp-active {
        background: linear-gradient(135deg, var(--vp-brand-indigo), var(--vp-brand-cyan));
        color: #fff;
        box-shadow: 0 8px 18px rgba(99,91,255,.22);
      }
      &:focus-visible { outline: none; box-shadow: 0 0 0 4px var(--vp-brand-ring); }
    }

    .vp-date {
      display: inline-grid; grid-auto-flow: column; align-items: center; gap: 8px;
      padding: 6px 8px; border-radius: 12px;
      background: #fff; border: 1px solid var(--vp-border);
      transition: box-shadow .18s ease;

      span { font-size: 12px; color: var(--vp-muted); }
      input[type="date"] {
        border: none; outline: none; background: transparent;
        color: var(--vp-text); font-size: 14px; padding: 4px 2px;
      }

      &:focus-within { box-shadow: 0 0 0 4px var(--vp-brand-ring); }
    }
  }

  /* ---------- KPIs ---------- */
  .vp-kpis {
    display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 6px 0 12px;

    @media (max-width: 560px) { grid-template-columns: 1fr; }

    .vp-kpi {
      background: var(--vp-surface);
      border: 1px solid var(--vp-border);
      border-radius: 14px;
      padding: 12px;
      box-shadow: var(--vp-shadow);
      display: grid; gap: 4px;

      .vp-kpi-label { font-size: 12px; color: var(--vp-muted); }
      .vp-kpi-value { font-size: clamp(18px, 1.8vw, 22px); line-height: 1; letter-spacing: -.3px; font-weight: 900; }
      .vp-kpi-sub { font-size: 12px; color: var(--vp-muted); }
    }
  }

  /* ---------- Card / Contenido ---------- */
  .vp-card {
    background: var(--vp-surface); border: 1px solid var(--vp-border);
    border-radius: 16px; box-shadow: var(--vp-shadow);
    padding: 12px;
  }

  /* Error */
  .vp-error {
    display: flex; justify-content: space-between; gap: 10px; align-items: center;
    padding: 10px 12px; border-radius: 12px;
    background: #fff2f3; color: #d92a34;
    border: 1px solid #ffd8dc; margin-bottom: 10px;

    button {
      border: 1px solid #ffd8dc; background: #fff; color: #d92a34;
      border-radius: 10px; padding: 6px 10px; cursor: pointer;
      transition: background .18s ease, transform .12s ease, box-shadow .18s ease;
      &:hover { background: #fff7f8; box-shadow: 0 6px 14px rgba(217,42,52,.12); transform: translateY(-0.5px); }
      &:active { transform: translateY(0); }
      &:focus-visible { outline: none; box-shadow: 0 0 0 4px var(--vp-brand-ring); }
    }
  }

  /* Empty */
  .vp-empty {
    display: grid; place-items: center;
    min-height: 180px; color: var(--vp-muted);
    background: var(--vp-surface-2); border: 1px dashed var(--vp-border);
    border-radius: 12px;
  }

  /* Skeleton */
  .vp-skeleton {
    .vp-skel-line {
      height: 14px; border-radius: 8px; background: #eef2f8; margin: 8px 0;
      &.w-70 { width: 70%; } &.w-90 { width: 90%; } &.w-60 { width: 60%; }
    }
    .vp-skel-chart {
      height: 260px; border-radius: 12px; margin-top: 8px;
      background: linear-gradient(90deg, #eef2f8, #f6f8fc, #eef2f8);
      background-size: 200% 100%;
      animation: vpShimmer 1.4s linear infinite;
      border: 1px solid var(--vp-border);
    }
  }
  @keyframes vpShimmer { 0% { background-position: 200% 0; } 100% { background-position: 0 0; } }

  /* Chart wrapper */
  .vp-chart { inline-size: 100%; }

  /* Accesibilidad local */
  :focus-visible { outline: 2px solid color-mix(in srgb, var(--vp-brand-indigo) 45%, white); outline-offset: 2px; }
}
