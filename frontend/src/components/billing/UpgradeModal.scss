/* src/components/billing/UpgradeModal.scss */

/* ===== Design tokens ===== */
$bg        : #ffffff;
$panel     : #ffffff;
$text      : #0f172a;
$muted     : #6b7280;
$line      : #e5e7eb;
$ring      : rgba(37, 99, 235, .35);
$shadow    : 0 10px 30px rgba(2, 6, 23, .18);
$shadow-sm : 0 6px 18px rgba(2, 6, 23, .12);

$brand     : #111827;  // negro-gris (bot√≥n primario)
$accent    : #2563eb;  // azul (resaltes)
$accent-50 : rgba(37, 99, 235, .06);
$danger    : #b91c1c;

:root {
  --et-brand: #111827;
  --et-accent: #2563eb;
}

/* ===== Generic utilities (local to modal) ===== */
.btn {
  --bg: #f3f4f6;
  --fg: #111827;
  --bd: transparent;

  display:inline-flex; align-items:center; gap:.55rem;
  height: 42px; padding: 0 14px;
  border-radius: 12px; border:1px solid var(--bd);
  background: var(--bg); color: var(--fg);
  font-weight: 600; letter-spacing:.2px;
  transition: background .2s ease, color .2s ease, border-color .2s ease, transform .06s ease;
  cursor: pointer; user-select: none;

  &:hover { transform: translateY(-1px); }
  &:active{ transform: translateY(0); }

  &--primary {
    --bg: #111827; --fg: #fff;
    &:hover { --bg: #0b1220; }
    &:focus-visible { outline: 0; box-shadow: 0 0 0 4px $ring; }
  }
  &--ghost {
    --bg: #fff; --fg: $text; --bd: $line;
    &:hover { --bg: #f8fafc; }
    &:focus-visible { outline:0; box-shadow:0 0 0 4px $ring; }
  }

  svg { width: 18px; height: 18px; }
}

.spin { animation: spin .8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.skeleton {
  height: 42px; border-radius: 10px; background: linear-gradient(90deg, #f3f4f6, #e5e7eb, #f3f4f6);
  background-size: 200% 100%; animation: shimmer 1.2s ease-in-out infinite;
}
@keyframes shimmer { to { background-position: -200% 0; } }

/* ===== Modal ===== */
.umodal {
  position: fixed; inset: 0; z-index: 1000;
  display: grid; place-items: center;

  &__backdrop {
    position: absolute; inset: 0;
    background: rgba(2,6,23,.48);
    backdrop-filter: blur(3px);
  }

  &__panel {
    position: relative;
    width: min(92vw, 760px);
    background: $panel;
    border-radius: 18px;
    box-shadow: $shadow;
    overflow: hidden;
  }

  &__close {
    position: absolute; top: 14px; right: 14px;
    display: grid; place-items: center;
    width: 38px; height: 38px;
    border-radius: 12px;
    border: 1px solid $line;
    background: #fff; color: $text;
    transition: background .2s ease, transform .06s ease;
    cursor: pointer;
    &:hover { background: #f8fafc; transform: translateY(-1px); }
    &:focus-visible { outline: 0; box-shadow: 0 0 0 4px $ring; }
    svg { width: 20px; height: 20px; }
  }

  &__header {
    display: grid; grid-template-columns: auto 1fr; gap: 14px;
    padding: 22px 22px 10px 22px; border-bottom: 1px solid $line;

    .icon {
      inline-size: 44px; block-size: 44px;
      border-radius: 12px; display: grid; place-items: center;
      background: $accent-50; color: $accent;
      svg { width: 22px; height: 22px; }
    }
    h3 { margin: 0 0 4px; font-size: 1.15rem; color: $text; }
    p  { margin: 0; color: $muted; }
  }

  &__body { padding: 18px 22px 22px; }

  &__section {
    border: 1px solid $line; border-radius: 14px; padding: 14px;
    &:not(:first-child){ margin-top: 14px; }

    legend {
      padding: 0 8px; color: $muted; font-size: .9rem;
    }
  }

  &__actions {
    display: flex; justify-content: flex-end; gap: 10px; margin-top: 16px;
  }

  &__error {
    margin-top: 12px;
    border: 1px solid mix($danger, #000, 85%);
    background: mix($danger, #fff, 7%);
    color: $danger;
    border-radius: 12px;
    padding: 10px 12px;
  }
}

/* ===== Plan cards ===== */
.plan-list {
  display: grid; grid-template-columns: repeat( auto-fit, minmax(180px, 1fr) );
  gap: 10px;
}

.plan {
  position: relative;
  border: 1px solid $line; border-radius: 14px;
  padding: 12px 12px 10px 42px; // espacio para el radio
  background: #fff; color: $text;
  transition: border-color .2s ease, box-shadow .2s ease, transform .06s ease;
  box-shadow: $shadow-sm;

  &:hover { transform: translateY(-1px); }
  &:focus-within { box-shadow: 0 0 0 4px $ring; }

  input[type="radio"] {
    position: absolute; inset-block-start: 12px; inset-inline-start: 12px;
    width: 18px; height: 18px;
  }

  &__name   { font-weight: 700; }
  &__period { color: $muted; font-size: .9rem; margin-top: 2px; }

  &.is-active {
    border-color: $accent;
    box-shadow: 0 0 0 4px $ring;
  }
}

/* ===== Billing form grid ===== */
.grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 12px;

  label {
    display: grid; gap: 6px;

    span { color: $muted; font-size: .9rem; }

    input {
      height: 42px; padding: 0 12px;
      border-radius: 12px; border: 1px solid $line;
      background: #fff; color: $text;
      transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;

      &:focus { outline: 0; border-color: $accent; box-shadow: 0 0 0 4px $ring; }
      &:disabled { background: #f3f4f6; color: #9ca3af; }
    }
  }

  &--full { grid-column: 1 / -1; }
}

/* ===== Responsive ===== */
@media (max-width: 720px) {
  .umodal__panel { width: min(95vw, 720px); }
  .grid { grid-template-columns: 1fr; }
  .plan-list { grid-template-columns: 1fr; }
  .btn { height: 44px; }
}

/* ===== Motion reduce ===== */
@media (prefers-reduced-motion: reduce) {
  .btn, .plan { transition: none !important; }
  .spin { animation: none !important; }
}
