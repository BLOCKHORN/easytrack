/* src/components/NavbarMobile.scss */
/* =================== MENÚ MÓVIL =================== */
.navbar__mobile{
  position: fixed; inset: 0; z-index: 3000;
  pointer-events:none; opacity:0; transition: opacity var(--tr, .18s);
  overflow: hidden;

  &.open{ pointer-events:auto; opacity:1; }
}

/* Backdrop clicable (botón para accesibilidad) */
.navbar__mobile-backdrop{
  position:absolute; inset:0;
  background: rgba(0,0,0,.55);
  border:0; padding:0; cursor:pointer;
}

/* Panel con safe-area top para que el logo NUNCA se tape por notch */
.navbar__mobile-panel{
  position:absolute; right:0; top:0; bottom:0;
  width: min(420px, 92vw);
  background:#0f1116;
  border-left:1px solid var(--nav-border, rgba(255,255,255,.12));
  box-shadow: -20px 0 40px rgba(0,0,0,.35);
  display:flex; flex-direction:column;
  transform: translateX(20px); opacity:0;
  transition: transform var(--tr, .18s), opacity var(--tr, .18s);
  overflow: hidden;

  /* Evita que nada solape cabecera: espacio seguro iOS + fijo */
  .navbar__mobile-header{
    position: sticky; top: 0;
    display:flex; align-items:center; justify-content:space-between;
    padding: calc(12px + env(safe-area-inset-top)) 14px 12px 14px;
    border-bottom:1px solid var(--nav-border, rgba(255,255,255,.12));
    background:#0f1116; z-index: 1; /* encima del scroll */

    .navbar__brand.small{
      display: inline-flex; align-items:center; min-width:0;
      .brand-wordmark{
        font-weight: 900; letter-spacing: .6px; color:#fff;
        font-size: 1rem; line-height: 1; white-space: nowrap;
      }
      img{ height: 28px; max-width: 140px; display:block; }
    }

    .navbar__mobile-close{
      width: 36px; height: 36px; border-radius: 10px;
      border:1px solid var(--nav-border, rgba(255,255,255,.12));
      background:#151922; color:#e5e7eb; cursor:pointer;
      font-size: 18px; line-height: 36px;
      display:inline-flex; align-items:center; justify-content:center;
      transition: background .18s, border-color .18s;
      &:hover{ background:#171b24; border-color: rgba(255,255,255,.18); }
    }
  }

  .navbar__mobile-content{
    padding: 14px;
    padding-bottom: calc(14px + env(safe-area-inset-bottom));
    overflow:auto; display:flex; flex-direction:column; gap: 18px;

    .mobile-section{
      h4{ margin: 0 0 8px 0; color:#fff; font-size: .95rem; }
      a{
        display:block; padding: 10px 10px; color:#e5e7eb; border-radius:10px; text-decoration:none;
        &:hover{ background: rgba(255,255,255,.06); }
      }
    }

    .mobile-link{
      display:block; padding: 10px; color:#e5e7eb; border-radius:10px; text-decoration:none;
      &:hover{ background: rgba(255,255,255,.06); }
    }

    .mobile-cta{
      margin-top:auto; display:flex; flex-direction:column; gap:10px;

      .navbar__link{
        display:flex; align-items:center; gap:8px;
        padding: 11px 12px; border-radius: 12px;
        font-weight: 800; font-size: .95rem;
        color:#e5e7eb; background: #14161b;
        border:1px solid var(--nav-border, rgba(255,255,255,.12));
        transition: background .18s, color .18s, border .18s;
        &.block{ width:100%; justify-content:center; }
        &:hover{ background:#171b24; border-color: rgba(255,255,255,.18); color:#fff; }
      }

      .navbar__cta{
        position:relative; padding: 12px 16px; border-radius: 12px; border:0;
        font-weight:800; font-size:1rem; letter-spacing:.2px; cursor:pointer;
        color:#0b1120; background:#fff;
        transition: transform .18s, box-shadow .18s, opacity .18s;
        box-shadow: 0 10px 36px rgba(96,165,250,.25);
        &.block{ width:100%; }
        &:hover{ transform: translateY(-1px); box-shadow: 0 14px 44px rgba(96,165,250,.35); }
      }

      .navbar__mobile-item{
        display:flex; align-items:center; gap:10px; padding: 11px 12px; border-radius: 12px;
        border:1px solid var(--nav-border, rgba(255,255,255,.12));
        background:#14161b; color:#e5e7eb; cursor:pointer; font-weight:800;
        transition: background .18s, border-color .18s, color .18s;
        &:hover{ background:#171b24; border-color: rgba(255,255,255,.18); }
        &.danger{ border-color: rgba(239,68,68,.35); }
      }
    }
  }
}

/* Animación de entrada */
.navbar__mobile.open .navbar__mobile-panel{ transform:none; opacity:1; }

/* Landscape / pantallas pequeñas: panel ocupa todo */
@media (max-height: 540px){
  .navbar__mobile-panel{ width: 100%; }
}

/* =================== HEADER GLOBAL: SOLO SMARTPHONES =================== */
/* Estas reglas NO afectan a laptop/desktop. Aplica hasta 640px (smartphones). */
@media (max-width: 640px){
  .navbar{
    position: relative; z-index: 100; /* por encima del contenido */
    display: flex; align-items: center; gap: 8px;
    padding: max(0px, env(safe-area-inset-top)) 12px 0 12px;

    .navbar__brand{ min-width: 0; position: relative; z-index: 2; }
    .brand-wordmark{ white-space: nowrap; }

    /* Empuja el botón a la derecha y evita posiciones absolutas/fijas que solapen */
    .btn--enter{
      position: static !important;
      margin-left: auto;
      flex: 0 0 auto;
      z-index: 1; /* siempre bajo el logo si se diera el caso */
      max-width: 56vw; /* evita que invada el lado izquierdo */
      overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
    }
  }

  /* Hamburguesa visible en móviles (si tu layout ya la muestra en tablet, esto no interfiere) */
  .navbar__hamburger{ display:inline-block; }
}

/* ===== Hamburguesa (tablets en adelante como tenías) ===== */
.navbar__hamburger{
  display:none; position:relative;
  width: 42px; height: 38px; border-radius:12px;
  border:1px solid var(--nav-border, rgba(255,255,255,.12));
  background:#14161b; cursor:pointer; margin-left: 4px; flex:0 0 auto;
  span{ position:absolute; left:10px; right:10px; height:2px; background:#cbd5e1; transition:transform .18s, opacity .18s; }
  span:nth-child(1){ top: 11px; }
  span:nth-child(2){ top: 18px; }
  span:nth-child(3){ top: 25px; }
  &.active span:nth-child(1){ transform: translateY(7px) rotate(45deg); }
  &.active span:nth-child(2){ opacity:0; }
  &.active span:nth-child(3){ transform: translateY(-7px) rotate(-45deg); }
}
@media (max-width: 1024px){
  .navbar__hamburger{ display:inline-block; }
}
