/* =========================================================
   Ubicaciones – Estilo minimal, scopeado completamente
   ========================================================= */

.ub-simple {
  position: relative;
  isolation: isolate;

  /* Paleta */
  --brand-500: #4d90ff;
  --brand-600: #397ef3;
  --brand-700: #2f6fe4;

  --sky-50:   #f6f9ff;
  --sky-100:  #eef4ff;
  --sky-200:  #d9e7ff;

  --slate-25:  #fbfcfe;
  --slate-50:  #f7fafc;
  --slate-100: #eef2f6;
  --slate-200: #e5e7eb;
  --slate-300: #d9dee7;
  --slate-400: #94a3b8;
  --slate-500: #64748b;
  --slate-700: #334155;
  --slate-800: #1f2937;
  --slate-900: #0f172a;

  --green-600: #16a34a;
  --amber-500: #f59e0b;
  --red-600:   #dc2626;

  --ring: 0 0 0 3px rgba(77, 144, 255, .18);

  color: var(--slate-900);

  /* ---------- Header ---------- */
  &__header {
    display:flex; align-items:center; gap:12px; margin-bottom:10px;
    .ub-icn{
      width:44px; height:44px; border-radius:10px; display:grid; place-items:center;
      color:var(--brand-700); font-size:20px; background:var(--sky-100); border:1px solid var(--sky-200);
    }
    .ub-txt{ flex:1 1 auto; min-width:0; }
    h3{ margin:0; font-size:18px; line-height:1.2; font-weight:800; }
    .ub-sub{ margin:2px 0 0; color:var(--slate-500); font-size:13px; }
  }

  /* ---------- Avisos ---------- */
  .ub-lock-banner{
    margin:8px 0 12px; padding:10px 12px; border-radius:10px;
    background:#fff7f7; border:1px solid #fde2e2; color:#7f1d1d; font-size:13px;
  }

  .ub-inline-ok{
    margin:8px 0 12px; padding:10px 12px; border-radius:10px;
    background:#f0fdf4; border:1px solid #bbf7d0; color:#065f46; font-size:13px; font-weight:700;
  }

  /* ---------- Controles ---------- */
  .ub-controls .control{
    background:#fff; border:1px solid var(--slate-200); border-radius:14px; padding:16px;
    display:grid; justify-items:center; text-align:center;
    .label{ font-size:14px; font-weight:800; color:var(--slate-600); margin-bottom:10px; }

    .stepper{
      display:inline-grid; grid-auto-flow:column; align-items:center; gap:12px;

      .btn-round{
        width:56px; height:56px; border-radius:12px; border:0; cursor:pointer;
        display:grid; place-items:center; line-height:1; font-size:24px; color:#fff;
        &.minus{ background:var(--red-600); }
        &.plus{  background:var(--green-600); }
      }

      .counter{
        width:200px; max-width:46vw; height:56px;
        background:#fff; border:1px solid var(--slate-300); border-radius:12px; display:grid; place-items:center;
        input[type="number"]{
          -moz-appearance:textfield; appearance:textfield;
          width:100%; height:100%; background:transparent; border:0; outline:none;
          text-align:center; font-size:28px; font-weight:900; color:var(--slate-900);
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
        &:focus-within{ box-shadow:var(--ring); border-color:var(--brand-500); }
      }
    }

    .hint{ margin-top:8px; color:var(--slate-500); font-size:12px; }
  }

  /* ---------- Grid ---------- */
  .ub-grid{
    margin-top:14px;

    .grid-head{
      display:grid; grid-template-columns:1fr auto; gap:10px; align-items:center; margin-bottom:12px;

      .section-title{
        display:inline-flex; align-items:center; gap:8px;
        background:#fff; border:1px solid var(--slate-200);
        border-radius:10px; padding:6px 10px; font-weight:800; color:var(--slate-800); font-size:13px;
      }

      .toolbar{
        display:inline-flex; flex-wrap:wrap; align-items:center; gap:10px;
        padding:6px 8px; background:#fff;
        border:1px dashed var(--slate-200); border-radius:10px;

        .group{ display:inline-flex; align-items:center; gap:8px; }
        .lbl{ color:var(--slate-600); font-weight:800; font-size:12px; }

        .seg-toggle{
          background:#fff; border:1px solid var(--slate-200); border-radius:10px; display:inline-flex; padding:3px; gap:4px;
          .seg{
            display:inline-flex; align-items:center; gap:6px; height:32px; padding:0 10px; border:0; border-radius:8px; cursor:pointer;
            background:transparent; color:var(--slate-800); font-weight:800; font-size:13px;
            .i{ font-size:18px; }
            &.is-active{ color:#fff; background:var(--brand-600); }
          }
        }

        .col-stepper{
          display:inline-grid; grid-auto-flow:column; align-items:center; gap:6px;
          .mini{
            width:32px; height:32px; border-radius:8px; border:1px solid var(--slate-300);
            background:#fff; display:grid; place-items:center; font-size:18px; line-height:1; cursor:pointer;
          }
          .val{ width:28px; text-align:center; font-weight:900; color:var(--slate-800); }
        }
        .hint{
          background:#fff; border:1px solid var(--slate-200); color:var(--slate-500);
          font-size:11px; font-weight:800; padding:3px 8px; border-radius:999px;
        }
      }
    }

    .grid-scroller{
      overflow-x:auto; overflow-y:visible; -webkit-overflow-scrolling:touch;
      padding-bottom:4px;
      mask-image: linear-gradient(90deg, transparent, #000 10px, #000 calc(100% - 10px), transparent);
    }

    .grid{
      display:grid; gap:10px;

      .cell{
        height:84px; border-radius:12px; background:#fff; border:1px solid var(--slate-200);
        display:grid; place-items:center; transition:border-color .15s ease;
        &:hover{ border-color:var(--brand-500); }

        &.is-used{
          border-color:#fde68a; background:#fffbeb; /* sutil para “ocupada” */
        }

        .pill{
          display:inline-flex; align-items:center; justify-content:center;
          min-width:54px; padding:6px 12px; border-radius:999px; font-weight:900; letter-spacing:.3px;
          color:var(--brand-700); background:var(--sky-100); border:1px solid var(--sky-200); pointer-events:none; font-size:13px;
        }
      }
    }
  }

  /* ---------- Footer ---------- */
  .ub-footer{ margin-top:12px; padding-top:4px; color:var(--slate-600); font-size:13px; }

  /* ---------- Responsive ---------- */
  @media (max-width: 980px){
    .ub-grid .grid-head{ grid-template-columns:1fr; }
  }

  @media (max-width: 640px){
    &__header{ align-items:flex-start; gap:10px; }
    .ub-controls .control .stepper{
      gap:10px;
      .btn-round{ width:52px; height:52px; font-size:22px; }
      .counter{ height:52px; width:170px; }
      .counter input[type="number"]{ font-size:24px; }
    }
    .ub-grid .grid{ gap:8px; }
    .ub-grid .grid .cell{ height:76px; }
    .ub-grid .grid .cell .pill{ padding:5px 10px; min-width:50px; font-size:12px; }
  }
}

/* --------- Dark (si tu app usa .dark) --------- */
.dark .ub-simple {
  color:#e5e7eb;

  &__header .ub-icn{ background:#0f172a; color:var(--brand-500); border-color:#1f2a44; }

  .ub-lock-banner{ background:#2a1313; border-color:#5b2a2a; color:#fca5a5; }
  .ub-inline-ok{ background:#0b2f1f; border-color:#14532d; color:#bbf7d0; }

  .ub-controls .control{
    background:#0b1220; border-color:#263044;
    .counter{ border-color:#2f4179; }
    .counter input[type="number"]{ color:#e5e7eb; }
  }

  .ub-grid .section-title{ background:#0b1220; border-color:#263044; color:#dbe2f0; }
  .ub-grid .toolbar{
    background:#0b1220; border-color:#2a3562;
    .seg-toggle{ border-color:#2a3562; background:#0f172a; }
    .seg-toggle .seg{ color:#cbd5e1; }
    .seg-toggle .seg.is-active{ background:var(--brand-600); color:#fff; }
    .col-stepper .mini{ background:#0f172a; border-color:#2a3562; color:#e5e7eb; }
    .hint{ background:#0f172a; border-color:#2a3562; color:#9fb0c9; }
  }

  .ub-grid .grid .cell{ background:#0b1220; border-color:#2a3562; }
  .ub-grid .grid .cell.is-used{ background:#1e1a0b; border-color:#785e0a; }
  .ub-grid .grid .cell .pill{ background:#0f172a; border-color:#2a3562; color:#cfe0ff; }

  .ub-footer{ color:#cbd5e1; }
}

/* =========================================================
   Modal de confirmación (scopeado y minimal)
   ========================================================= */
.ub-simple .ub-modal{
  position:fixed; inset:0; z-index:1000; display:grid; place-items:center;
}

.ub-simple .ub-modal__backdrop{
  position:absolute; inset:0; background:rgba(15, 23, 42, .5);
}

.ub-simple .ub-modal__dialog{
  position:relative; width:min(680px, 92vw); background:#fff; border-radius:12px;
  border:1px solid var(--slate-200); box-shadow:0 20px 60px rgba(15, 23, 42, .25);
  padding:16px 16px 14px; color:#0f172a;
}

.ub-simple .ub-modal__close{
  position:absolute; top:10px; right:10px; width:34px; height:34px;
  display:grid; place-items:center; border:1px solid var(--slate-200);
  border-radius:8px; background:#fff; cursor:pointer; color:var(--slate-700);
}

.ub-simple .ub-modal__header{
  display:flex; gap:10px; align-items:flex-start; margin-bottom:8px;
}
.ub-simple .ub-modal__icon{
  width:40px; height:40px; border-radius:8px; display:grid; place-items:center;
  background:#fff1f2; color:#dc2626; border:1px solid #fecaca; font-size:20px; flex:0 0 auto;
}
.ub-simple .ub-modal__header h4{
  margin:0 0 2px; font-size:16px; font-weight:800; color:#0f172a;
}
.ub-simple .ub-modal__header p{
  margin:0; color:#475467; font-size:13px;
}

.ub-simple .ub-modal__body{
  max-height:min(52vh, 480px); overflow:auto; padding-right:2px;
}

.ub-simple .ub-modal__list{
  border:1px solid var(--slate-200); border-radius:10px; background:var(--slate-25); padding:8px;
}
.ub-simple .ub-modal__ubi{ padding:8px 6px; border-bottom:1px dashed var(--slate-200); }
.ub-simple .ub-modal__ubi:last-child{ border-bottom:0; }
.ub-simple .ub-modal__ubi-head{
  display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;
}
.ub-simple .ub-modal__ubi-head .ubi-code{
  font-weight:900; color:#1f2937; background:var(--sky-100); border:1px solid var(--sky-200);
  padding:2px 8px; border-radius:999px; font-size:12px;
}
.ub-simple .ub-modal__ubi-head .ubi-count{ color:#475467; font-weight:700; font-size:12px; }
.ub-simple .ub-modal .ubi-names{
  margin:0; padding-left:18px; color:#0f172a; font-size:13px;
}
.ub-simple .ub-modal .ubi-names li{ margin:1px 0; }
.ub-simple .ub-modal .ubi-extra{ color:#475467; font-size:12px; margin-top:2px; }

.ub-simple .ub-modal__confirm{
  margin-top:10px; display:grid; gap:6px;
}
.ub-simple .ub-modal__confirm label{ font-size:11px; color:#475467; }
.ub-simple .ub-modal__confirm-phrase{
  display:inline-block; font-weight:900; color:#0f172a; background:var(--sky-50);
  border:1px solid var(--sky-200); padding:3px 8px; border-radius:8px; width:max-content; margin-bottom:2px; font-size:12px;
}
.ub-simple .ub-modal__input{
  width:100%; height:40px; border-radius:10px; border:1px solid var(--slate-300); padding:0 10px; font-size:14px;
}
.ub-simple .ub-modal__input:focus{
  outline:none; border-color:var(--brand-500); box-shadow:var(--ring);
}

.ub-simple .ub-modal__footer{
  margin-top:12px; display:flex; justify-content:flex-end; gap:8px;
}

/* Botones del modal — scopeados y con alta especificidad para evitar colisiones */
.ub-simple .ub-modal__footer button.btn,
.ub-simple .ub-modal__footer .btn {
  all: unset;
  display:inline-flex; align-items:center; justify-content:center;
  height:40px; padding:0 14px; border-radius:10px; font-weight:800; border:1px solid transparent;
  cursor:pointer; font-size:14px;
  /* Evita herencia de estilos globales de .btn */
  background:#fff !important; color:#0f172a !important; border-color:var(--slate-200) !important;
}
.ub-simple .ub-modal__footer .btn.ghost {
  background:#fff !important; color:#0f172a !important; border-color:var(--slate-200) !important;
}
.ub-simple .ub-modal__footer .btn.danger {
  background:var(--red-600) !important; color:#fff !important; border-color:var(--red-600) !important;
}
.ub-simple .ub-modal__footer .btn:disabled{
  opacity:.6; cursor:not-allowed;
}

/* Dark modal */
.dark .ub-simple .ub-modal__dialog{ background:#0b1220; border-color:#2a3562; color:#e5e7eb; }
.dark .ub-simple .ub-modal__close{ background:#0b1220; border-color:#2a3562; color:#cbd5e1; }
.dark .ub-simple .ub-modal__header p{ color:#cbd5e1; }
.dark .ub-simple .ub-modal__icon{ background:#2a1313; color:#fca5a5; border-color:#5b2a2a; }
.dark .ub-simple .ub-modal__list{ background:#0f172a; border-color:#2a3562; }
.dark .ub-simple .ub-modal__ubi-head .ubi-code{ background:#0f172a; border-color:#2a3562; color:#cfe0ff; }
.dark .ub-simple .ub-modal__input{ background:#0b1220; border-color:#2a3562; color:#e5e7eb; }
.dark .ub-simple .ub-modal__confirm-phrase{ background:#0f172a; border-color:#2a3562; color:#e5e7eb; }

.dark .ub-simple .ub-modal__footer .btn {
  background:#0b1220 !important; border-color:#2a3562 !important; color:#e5e7eb !important;
}
.dark .ub-simple .ub-modal__footer .btn.danger {
  background:#b91c1c !important; border-color:#b91c1c !important; color:#fff !important;
}
