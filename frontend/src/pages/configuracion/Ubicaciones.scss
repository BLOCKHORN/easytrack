/* =========================================================
   Ubicaciones – pastel azul/rosado (scope total)
   ========================================================= */

.ub-simple {
  position: relative;
  isolation: isolate;

  /* Paleta */
  --brand-500: #66a2ff;
  --brand-600: #4d90ff;
  --brand-700: #397ef3;
  --rose-100: #ffdbe8;
  --rose-200: #ffc2da;
  --sky-50:   #f3f8ff;
  --sky-100:  #e8f1ff;
  --sky-200:  #cfe2ff;
  --slate-50:  #f7fafc;
  --slate-100: #eef2f6;
  --slate-200: #e5e7eb;
  --slate-300: #d9dee7;
  --slate-400: #94a3b8;
  --slate-600: #475467;
  --slate-800: #1f2937;
  --slate-900: #0f172a;
  --green-600: #16a34a;
  --red-600:   #dc2626;

  --ring: 0 0 0 4px rgba(77, 144, 255, .22);

  color: var(--slate-900);

  /* Evitar que estilos globales animen SVGs de aquí */
  .ub-icn svg,
  .seg-toggle .i,
  .col-stepper .mini svg,
  .btn-round svg { transition:none !important; animation:none !important; transform:none !important; }

  /* ---------- Header ---------- */
  &__header {
    display:flex; align-items:center; gap:16px; margin-bottom:12px;
    .ub-icn{
      width:48px; height:48px; border-radius:12px; display:grid; place-items:center;
      color:var(--brand-700); font-size:22px; background:var(--sky-100); border:1px solid var(--sky-200);
    }
    .ub-txt{ flex:1 1 auto; min-width:0; }
    h3{ margin:0; font-size:19px; line-height:1.2; }
    .ub-sub{ margin:4px 0 0; color:var(--slate-600); font-size:14px; }
  }

  /* Banner bloqueo */
  .ub-lock-banner{
    margin:8px 0 12px; padding:10px 12px; border-radius:12px;
    background:linear-gradient(180deg,#fff7f7,#fff0f0);
    border:1px dashed #fecaca; color:#7f1d1d; font-size:14px;
  }

  /* ---------- Bloque control cantidad ---------- */
  .ub-controls {
    .control{
      background:linear-gradient(180deg,#ffffff,var(--slate-50));
      border:1px solid var(--slate-200); border-radius:18px; padding:18px;
      display:grid; justify-items:center; text-align:center;
      .label{ font-size:15px; font-weight:900; letter-spacing:.2px; color:var(--slate-600); margin-bottom:10px; }

      .stepper{
        display:inline-grid; grid-auto-flow:column; align-items:center; gap:14px;

        .btn-round{
          width:64px; height:64px; border-radius:16px; border:0; cursor:pointer;
          display:grid; place-items:center; line-height:1; font-size:28px; color:#fff;
          &.minus{ background:var(--red-600); }
          &.plus{  background:var(--green-600); }
        }

        .counter{
          width:210px; max-width:46vw; height:68px;
          background:#fff; border:2px solid var(--sky-200); border-radius:16px; display:grid; place-items:center;
          input[type="number"]{
            -moz-appearance:textfield; appearance:textfield;
            width:100%; height:100%; background:transparent; border:0; outline:none;
            text-align:center; font-size:34px; font-weight:900; color:var(--slate-900);
          }
          input[type="number"]::-webkit-outer-spin-button,
          input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
          &:focus-within{ box-shadow:var(--ring); border-color:var(--brand-600); }
        }
      }

      .hint.error{
        margin-top:10px; color:#7f1d1d; background:#fee2e2; border:1px dashed #fecaca;
        padding:6px 10px; border-radius:10px; font-size:13px;
      }
    }
  }

  /* ---------- Grid ---------- */
  .ub-grid{
    margin-top:14px;

    .grid-head{
      display:grid; grid-template-columns:1fr auto; gap:14px; align-items:center; margin-bottom:14px;

      .section-title{
        display:inline-flex; align-items:center; gap:10px;
        background:linear-gradient(180deg,#fff,var(--slate-50)); border:1px solid var(--slate-200);
        border-radius:14px; padding:8px 12px; font-weight:900; color:var(--slate-800);
      }

      .toolbar{
        display:inline-flex; flex-wrap:wrap; align-items:center; gap:14px;
        padding:8px 10px; background:linear-gradient(180deg,#fff,var(--slate-50));
        border:1px dashed var(--slate-200); border-radius:14px;

        .group{ display:inline-flex; align-items:center; gap:10px; }
        .lbl{ color:var(--slate-600); font-weight:900; font-size:12px; }

        .seg-toggle{
          background:#fff; border:1px solid var(--slate-200); border-radius:12px; display:inline-flex; padding:4px; gap:6px;
          .seg{
            display:inline-flex; align-items:center; gap:8px; height:36px; padding:0 12px; border:0; border-radius:8px; cursor:pointer;
            background:transparent; color:var(--slate-800); font-weight:800;
            .i{ font-size:18px; }
            &.is-active{ color:#fff; background:linear-gradient(135deg,var(--brand-500),var(--brand-600)); }
          }
        }

        .col-stepper{
          display:inline-grid; grid-auto-flow:column; align-items:center; gap:8px;
          .mini{
            width:36px; height:36px; border-radius:10px; border:1px solid var(--slate-300);
            background:#fff; display:grid; place-items:center; font-size:18px; line-height:1;
          }
          .val{ width:30px; text-align:center; font-weight:900; color:var(--slate-800); }
        }
        .hint{
          background:var(--rose-100); border:1px solid var(--rose-200); color:#7d4f61;
          font-size:12px; font-weight:900; padding:4px 8px; border-radius:999px;
        }
      }
    }

    /* Envoltura scrolleable SOLO en móvil/tablet: mantiene tus columnas exactas sin romper layout */
    .grid-scroller{
      overflow-x:auto; overflow-y:visible; -webkit-overflow-scrolling:touch;
      padding-bottom:6px;
      /* degradado de máscara para indicar overflow */
      mask-image: linear-gradient(90deg, transparent, #000 12px, #000 calc(100% - 12px), transparent);
    }

    .grid{
      display:grid; gap:14px;
      /* El width real lo define la suma de columnas; al permitir overflow-x en .grid-scroller,
         la grid puede crecer horizontalmente sin desbordar el contenedor principal. */

      .cell{
        height:92px; border-radius:16px; background:#fff; border:1px solid var(--slate-200);
        display:grid; place-items:center;
        &:hover{ border-color:var(--brand-600); }

        .pill{
          display:inline-flex; align-items:center; justify-content:center;
          min-width:58px; padding:8px 14px; border-radius:999px; font-weight:900; letter-spacing:.4px;
          color:var(--brand-700); background:var(--sky-100); border:2px solid var(--sky-200); pointer-events:none;
        }
      }
    }
  }

  /* ---------- Footer ---------- */
  .ub-footer{ margin-top:14px; padding-top:6px; color:var(--slate-600); font-size:14px; }

  /* ---------- Responsive ---------- */
  @media (max-width: 980px){
    .ub-grid .grid-head{ grid-template-columns:1fr; }
  }

  @media (max-width: 640px){
    &__header{ align-items:flex-start; gap:12px; }
    .ub-controls .control .stepper{
      gap:10px;
      .btn-round{ width:56px; height:56px; font-size:24px; }
      .counter{ height:60px; }
      .counter input[type="number"]{ font-size:28px; }
    }
    .ub-grid .toolbar{ gap:10px; }
    .ub-grid .grid{ gap:10px; }
    .ub-grid .grid .cell{ height:82px; }
    .ub-grid .grid .cell .pill{ padding:6px 10px; min-width:52px; }
  }
}

/* --------- Dark (si tu app usa .dark) --------- */
.dark .ub-simple {
  color:#e5e7eb;

  &__header .ub-icn{ background:#0f172a; color:var(--brand-500); border-color:#1f2a44; }

  .ub-lock-banner{ background:linear-gradient(180deg,#2a1313,#1b0f10); border-color:#5b2a2a; color:#fca5a5; }

  .ub-controls .control{
    background:linear-gradient(180deg,#0b1220,#0f172a); border-color:#263044;
    .counter{ border-color:#2f4179; }
    .counter input[type="number"]{ color:#e5e7eb; }
  }

  .ub-grid .section-title{ background:linear-gradient(180deg,#0b1220,#0f172a); border-color:#263044; }
  .ub-grid .toolbar{
    background:linear-gradient(180deg,#0b1220,#0f172a); border-color:#2a3562;
    .seg-toggle{ border-color:#2a3562; background:#0f172a; }
    .col-stepper .mini{ background:#0f172a; border-color:#2a3562; color:#e5e7eb; }
    .hint{ background:#2a1530; border-color:#432b48; color:#e9cfe1; }
  }

  .ub-grid .grid .cell{ background:#0b1220; border-color:#2a3562; }
  .ub-grid .grid .cell .pill{ background:#0f172a; border-color:#2a3562; color:#cfe0ff; }

  .ub-footer{ color:#cbd5e1; }
}
