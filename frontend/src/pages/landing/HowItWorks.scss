/* src/components/HowItWorks.scss */
.ep-hiw{
  /* Tokens */
  --hiw-text: var(--ld-text, #0f172a);
  --hiw-muted: #64748b;
  --hiw-surface: var(--ld-surface, #fff);
  --hiw-border: rgba(2,6,23,.08);
  --hiw-shadow: 0 14px 28px rgba(2,6,23,.06);
  --hiw-primary-rgb: var(--primary-rgb, 79,70,229);

  position: relative; z-index: 1;
  padding: clamp(40px, 6vw, 88px) clamp(18px, 5vw, 72px);
  color: var(--hiw-text);

  /* Head */
  &__head{
    text-align: center; margin-bottom: clamp(18px, 3vw, 28px);
    h2{
      margin: 0 0 6px; font-weight: 900;
      font-size: clamp(1.8rem, 3.3vw, 2.4rem);
      letter-spacing: -.01em;
    }
    p{ margin:0; color: var(--hiw-muted); }
  }

  /* Layout */
  &__grid{
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: clamp(14px, 2.6vw, 22px);
    @media (max-width: 980px){
      grid-template-columns: 1fr;
    }
  }

  /* Timeline */
  &__timeline{
    list-style: none; padding: 0; margin: 0; position: relative;
  }

  &__step{
    display: grid;
    grid-template-columns: 40px 1fr;
    gap: 12px;
    background: var(--hiw-surface);
    border: 1px solid var(--hiw-border);
    border-radius: 16px;
    padding: 14px;
    box-shadow: var(--hiw-shadow);
    + .ep-hiw__step{ margin-top: 12px; }

    @media (max-width:560px){
      grid-template-columns: 32px 1fr;
    }
  }

  &__dot{
    display: grid; place-items: center;
    width: 40px; height: 40px; border-radius: 50%;
    background: rgba(var(--hiw-primary-rgb), .09);
    border: 1px solid rgba(var(--hiw-primary-rgb), .25);
    color: #111827; font-weight: 900;
    @media (max-width:560px){ width: 32px; height: 32px; font-size: 13px; }
  }

  &__content{ display: grid; gap: 10px; align-content: start; }

  &__step-head{
    display: flex; align-items: center; justify-content: space-between; gap: 10px;
    h3{ margin: 0; font-weight: 900; font-size: 1.1rem; color: var(--hiw-text); }
  }

  &__time{
    display: inline-flex; align-items: center; gap: 6px;
    font-weight: 800; font-size: 13px; color: #111827;
    background: rgba(var(--hiw-primary-rgb), .08);
    border: 1px solid rgba(var(--hiw-primary-rgb), .2);
    padding: 6px 10px; border-radius: 999px;
    svg{ opacity: .9; }
  }

  &__tasks{
    list-style: none; padding: 0; margin: 0;
    display: grid; gap: 6px; color: var(--hiw-text);
    li{ display: inline-flex; align-items: center; gap: 8px; }
    svg{ color: rgb(var(--hiw-primary-rgb)); opacity: .9; }
  }

  &__tip{
    background: #f0fdf4; border: 1px solid #bbf7d0; color: #14532d;
    padding: 8px 10px; border-radius: 10px; font-weight: 700; font-size: 13px;
    width: fit-content;
  }

  /* Acciones */
  &__actions{ display: flex; gap: 8px; flex-wrap: wrap; }

  &__btn{
    display:inline-flex; align-items:center; justify-content:center; gap:8px;
    font-weight:800; border-radius:10px; padding:10px 14px;
    border:1px solid #e5e7eb; background:#fff; color: var(--hiw-text);
    cursor:pointer; text-decoration:none;
    transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;
    &:hover{ transform: translateY(-1px); box-shadow:0 8px 18px rgba(2,6,23,.08); }
    &:focus-visible{ outline:2px solid rgba(var(--hiw-primary-rgb), .5); outline-offset:2px; }
  }
  &__btn--primary{
    background: rgb(var(--hiw-primary-rgb)); color:#fff; border-color: rgba(15,23,42,.08);
  }
  &__btn--ghost{
    background:#fff; color: rgb(var(--hiw-primary-rgb)); border-color: rgba(var(--hiw-primary-rgb), .3);
  }

  /* Panel lateral (asistente) */
  &__preview{
    position: relative;
  }

  &__assistant{
    background: var(--hiw-surface);
    border: 1px solid var(--hiw-border);
    border-radius: 16px;
    padding: 14px;
    box-shadow: var(--hiw-shadow);
    position: sticky; top: 14px;
    @media (max-width: 980px){ position: static; }
  }

  &__assistant-head{
    display:flex; align-items:center; gap:8px; font-weight:900; color:#111827;
    margin-bottom: 10px;
    svg{ color: rgb(var(--hiw-primary-rgb)); }
  }

  &__assistant-body{ display: grid; gap: 8px; }

  &__row{
    display: grid; grid-template-columns: 1fr 1.2fr; gap: 6px;
    padding: 8px 10px;
    background: #fff; border: 1px solid #e5e7eb; border-radius: 10px;
    @media (max-width:560px){ grid-template-columns: 1fr; }
  }
  &__k{ color: var(--hiw-muted); font-size: 12px; font-weight: 700; }
  &__v{ color: var(--hiw-text); font-weight: 800; display: inline-flex; align-items: center; gap: 6px; }

  &__divider{
    height: 1px; background: #e5e7eb; margin: 4px 0;
  }

  /* Progreso */
  &__progress{
    list-style: none; padding: 0; margin: 0; display:grid; gap:6px;
  }
  &__state{
    display: inline-flex; align-items: center; gap: 8px;
    font-weight: 800; padding: 8px 10px; border-radius: 10px; border:1px solid #e5e7eb; background:#fff;
  }
  &__state--done{
    background:#f0fdf4; border-color:#bbf7d0; color:#166534;
    svg{ color:#16a34a; }
  }
  &__state--current{
    background: rgba(var(--hiw-primary-rgb), .06);
    border-color: rgba(var(--hiw-primary-rgb), .25); color:#111827;
  }
  &__state--next{ color: var(--hiw-muted); }

  /* Animaciones de entrada */
  &__reveal{
    opacity: 0; transform: translateY(8px);
    animation: hiw-fadeUp .5s ease forwards;
  }
  /* Puedes escalonar con nth-child si lo deseas */
  &__timeline > .ep-hiw__step:nth-child(2){ animation-delay: .06s; }
  &__timeline > .ep-hiw__step:nth-child(3){ animation-delay: .12s; }
  &__preview .ep-hiw__assistant{ animation-delay: .18s; }

  @keyframes hiw-fadeUp{
    to{ opacity:1; transform:none; }
  }

  @media (prefers-reduced-motion: reduce){
    &__reveal{ opacity:1; transform:none; animation:none; }
  }
}
